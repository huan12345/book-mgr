{"remainingRequest":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\Users\\AddOne\\index.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\Users\\AddOne\\index.js","mtime":1638086212241},{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2trZTIyMjIyMi9EZXNrdG9wL3Byb2plY3RzL2Jvb2stbWdyL2Jvb2stbWdyLWZlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHJlYWN0aXZlIH0gZnJvbSAndnVlJzsgLy8gcmVhY3RpdmXlk43lupTlvI/nmoTmlbDlrZfpm4blkIgKCmltcG9ydCB7IHVzZXIgfSBmcm9tICdAL3NlcnZpY2UnOyAvLyDlj5HlvoDlkI7nq69odHRw6K+35rGC77yM5re75Yqg5Lmm57GNCgppbXBvcnQgeyBtZXNzYWdlIH0gZnJvbSAnYW50LWRlc2lnbi12dWUnOyAvLyDmj5DnpLoKCmltcG9ydCB7IHJlc3VsdCwgY2xvbmUgfSBmcm9tICdAL2hlbHBlcnMvdXRpbHMnOyAvLyByZXN1bHQg5Yik5pat5Y+R57uZ5ZCO56uvaHR0cOivt+axguaIkOWKn+aIluiAheWksei0pe+8m2Nsb25lIOWkjeWItu+8mwovLyDmt7vliqDkuabnsY3ooajljZXmlbDmja7pm4blkIgKCnZhciBkZWZhdWx0Rm9ybURhdGEgPSB7CiAgYWNjb3VudDogJycsCiAgcGFzc3dvcmQ6ICcnCn07CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgLy8g5YWB6K645aSW6Z2i5Lyg6YCS6L+b5p2l55qE5Y+C5pWwCiAgcHJvcHM6IHsKICAgIHNob3c6IEJvb2xlYW4gLy8gYWRk5by556qX5byA5YWzCgogIH0sCiAgLy8g5re75Yqg5by55qGG55qE5omn6KGMCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBjb250ZXh0KSB7CiAgICAvLyDlk43lupTlvI/nmoTmt7vliqDkuabnsY3ooajljZUKICAgIHZhciBhZGRGb3JtID0gcmVhY3RpdmUoY2xvbmUoZGVmYXVsdEZvcm1EYXRhKSk7IC8vIOWFs+mXreW8ueeql++8jHVwZGF0ZTpzaG935a6e546w5Y+M5ZCR57uR5a6a77yM5o+Q5L6bdi1tb2RlbOaMh+S7pAoKICAgIHZhciBjbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICBjb250ZXh0LmVtaXQoJ3VwZGF0ZTpzaG93JywgZmFsc2UpOyAvLyBlbWl077ya6Kem5Y+R6Ieq5a6a5LmJ5LqL5Lu277ya5pu05paw5Lyg6YCS6L+b5p2l55qEc2hvd+aIkGZhbHNlCiAgICB9OyAvLyDngrnlh7vlvLnmoYZva+aMiemSruS6i+S7tgoKCiAgICB2YXIgc3VibWl0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGZvcm0sIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBmb3JtID0gY2xvbmUoYWRkRm9ybSk7IC8vIOWkjeWItuihqOWNle+8jOebrueahO+8muWwhuaXtumXtOaUueaIkOaXtumXtOaIs+W9ouW8jwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXIuYWRkKGZvcm0uYWNjb3VudCwgZm9ybS5wYXNzd29yZCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAvLyBodHRw5Y+R6YCB57uZ5ZCO56uv5re75Yqg5Lmm57GN6LSm5Y+344CB5a+G56CBCiAgICAgICAgICAgICAgICAvLyBodHRw6K+35rGC5oiQ5Yqf5pe25LqL5Lu2CiAgICAgICAgICAgICAgICByZXN1bHQocmVzKS5zdWNjZXNzKGZ1bmN0aW9uIChkLCBfcmVmMikgewogICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7CiAgICAgICAgICAgICAgICAgIC8vIOa4heepuuihqOWNle+8mmRlZmF1bHRGb3JtRGF0YeepuuaVsOaNruWQiOW5tmFkZEZvcm0KICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhZGRGb3JtLCBkZWZhdWx0Rm9ybURhdGEpOwogICAgICAgICAgICAgICAgICBtZXNzYWdlLnN1Y2Nlc3MoZGF0YS5tc2cpOyAvLyDmj5DnpLrmt7vliqDmiJDlip8KCiAgICAgICAgICAgICAgICAgIGNsb3NlKCk7IC8vIOWFs+mXreW8ueeqlwoKICAgICAgICAgICAgICAgICAgY29udGV4dC5lbWl0KCdnZXRMaXN0Jyk7IC8vIOiOt+WPlueUqOaIt+a4heWNlQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIHsKICAgICAgYWRkRm9ybTogYWRkRm9ybSwKICAgICAgLy8g5re75Yqg5Lmm57GN6KGo5Y2VCiAgICAgIHN1Ym1pdDogc3VibWl0LAogICAgICAvLyBPS+aMiemSrgogICAgICBwcm9wczogcHJvcHMsCiAgICAgIC8vIOWkluadpeWPguaVsO+8muW8ueahhuW8gOWFswogICAgICBjbG9zZTogY2xvc2UgLy8g5YWz6Zet5by55qGGCgogICAgfTsKICB9Cn0pOw=="},{"version":3,"sources":["C:/Users/kke222222/Desktop/projects/book-mgr/book-mgr-fe/src/views/Users/AddOne/index.js"],"names":["defineComponent","reactive","user","message","result","clone","defaultFormData","account","password","props","show","Boolean","setup","context","addForm","close","emit","submit","form","add","res","success","d","data","Object","assign","msg"],"mappings":";;AAAA,SAASA,eAAT,EAA0BC,QAA1B,QAA0C,KAA1C,C,CAAiD;;AACjD,SAASC,IAAT,QAAqB,WAArB,C,CAAkC;;AAClC,SAASC,OAAT,QAAwB,gBAAxB,C,CAA0C;;AAC1C,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,iBAA9B,C,CAAgD;AAEhD;;AACA,IAAMC,eAAe,GAAG;AAChBC,EAAAA,OAAO,EAAE,EADO;AAEhBC,EAAAA,QAAQ,EAAE;AAFM,CAAxB;AAKA,eAAeR,eAAe,CAAC;AAE3B;AACAS,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAEC,OADH,CACY;;AADZ,GAHoB;AAO3B;AACDC,EAAAA,KAR4B,iBAQtBH,KARsB,EAQhBI,OARgB,EAQP;AAEhB;AACA,QAAMC,OAAO,GAAGb,QAAQ,CAACI,KAAK,CAACC,eAAD,CAAN,CAAxB,CAHgB,CAKhB;;AACA,QAAMS,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChBF,MAAAA,OAAO,CAACG,IAAR,CAAa,aAAb,EAA4B,KAA5B,EADgB,CACmB;AACtC,KAFD,CANgB,CAUhB;;;AACA,QAAMC,MAAM;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACLC,gBAAAA,IADK,GACEb,KAAK,CAACS,OAAD,CADP,EACkB;;AADlB;AAAA,uBAGOZ,IAAI,CAACiB,GAAL,CAASD,IAAI,CAACX,OAAd,EAAuBW,IAAI,CAACV,QAA5B,CAHP;;AAAA;AAGLY,gBAAAA,GAHK;AAG8C;AAEzD;AACAhB,gBAAAA,MAAM,CAACgB,GAAD,CAAN,CACKC,OADL,CACa,UAACC,CAAD,SAAiB;AAAA,sBAAXC,IAAW,SAAXA,IAAW;AACtB;AACAC,kBAAAA,MAAM,CAACC,MAAP,CAAcX,OAAd,EAAuBR,eAAvB;AACAH,kBAAAA,OAAO,CAACkB,OAAR,CAAgBE,IAAI,CAACG,GAArB,EAHsB,CAGK;;AAC3BX,kBAAAA,KAAK,GAJiB,CAIb;;AACTF,kBAAAA,OAAO,CAACG,IAAR,CAAa,SAAb,EALsB,CAKG;AAE5B,iBARL;;AANW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAANC,MAAM;AAAA;AAAA;AAAA,OAAZ;;AAiBA,WAAO;AACHH,MAAAA,OAAO,EAAPA,OADG;AACM;AACTG,MAAAA,MAAM,EAANA,MAFG;AAEM;AACTR,MAAAA,KAAK,EAALA,KAHG;AAGM;AACTM,MAAAA,KAAK,EAALA,KAJG,CAIM;;AAJN,KAAP;AAMJ;AA1C2B,CAAD,CAA9B","sourcesContent":["import { defineComponent, reactive } from 'vue'; // reactive响应式的数字集合\r\nimport { user } from '@/service'; // 发往后端http请求，添加书籍\r\nimport { message } from 'ant-design-vue'; // 提示\r\nimport { result, clone } from '@/helpers/utils';// result 判断发给后端http请求成功或者失败；clone 复制；\r\n\r\n// 添加书籍表单数据集合\r\nconst defaultFormData = {\r\n        account: '',\r\n        password: '',\r\n}\r\n\r\nexport default defineComponent({\r\n\r\n    // 允许外面传递进来的参数\r\n    props: {\r\n        show: Boolean, // add弹窗开关\r\n    },\r\n\r\n    // 添加弹框的执行\r\n   setup(props,context) {\r\n\r\n        // 响应式的添加书籍表单\r\n        const addForm = reactive(clone(defaultFormData));\r\n\r\n        // 关闭弹窗，update:show实现双向绑定，提供v-model指令\r\n        const close = () => {\r\n            context.emit('update:show', false);// emit：触发自定义事件：更新传递进来的show成false\r\n        };\r\n\r\n        // 点击弹框ok按钮事件\r\n        const submit = async () => {\r\n            const form = clone(addForm); // 复制表单，目的：将时间改成时间戳形式\r\n\r\n            const res = await user.add(form.account, form.password); // http发送给后端添加书籍账号、密码\r\n\r\n            // http请求成功时事件\r\n            result(res)\r\n                .success((d, { data }) => {\r\n                    // 清空表单：defaultFormData空数据合并addForm\r\n                    Object.assign(addForm, defaultFormData);\r\n                    message.success(data.msg); // 提示添加成功\r\n                    close(); // 关闭弹窗\r\n                    context.emit('getList'); // 获取用户清单\r\n\r\n                });\r\n        };\r\n\r\n        return {\r\n            addForm, // 添加书籍表单\r\n            submit,  // OK按钮\r\n            props,   // 外来参数：弹框开关\r\n            close,   // 关闭弹框\r\n        };\r\n   },\r\n});"]}]}