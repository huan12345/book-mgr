{"remainingRequest":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\Books\\Update\\index.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\Books\\Update\\index.js","mtime":1637568707457},{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2trZTIyMjIyMi9EZXNrdG9wL3Byb2plY3RzL2Jvb2stbWdyL2Jvb2stbWdyLWZlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWFjdGl2ZSwgd2F0Y2ggfSBmcm9tICd2dWUnOyAvLyByZWFjdGl2ZeWTjeW6lOW8j+eahOaVsOWtl+mbhuWQiAoKaW1wb3J0IHsgYm9vayB9IGZyb20gJ0Avc2VydmljZSc7IC8vIOiOt+WPlmFkZOivt+axguaVsOaNrgoKaW1wb3J0IHsgbWVzc2FnZSB9IGZyb20gJ2FudC1kZXNpZ24tdnVlJzsgLy8g5o+Q56S6CgppbXBvcnQgeyByZXN1bHQsIGNsb25lIH0gZnJvbSAnQC9oZWxwZXJzL3V0aWxzJzsgLy8gcmVzdWx0IOWIpOaWreWTjeW6lOWGheWuueaIkOWKn+aIluiAheWksei0pe+8m2Nsb25lIOWkjeWItgoKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOyAvLyDlpITnkIblkIjlubblr7nosaHvvIzml7bpl7QKCmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgLy8g5YWB6K645aSW6Z2i5Lyg6YCS6L+b5p2l55qE5Y+C5pWw77yM5by556qX5byA5YWzCiAgcHJvcHM6IHsKICAgIHNob3c6IEJvb2xlYW4sCiAgICAvLyBhZGTlvLnmoYYKICAgIGJvb2s6IE9iamVjdCAvLyDkuabml6LmlbDmja4KCiAgfSwKICAvLyDnvJbovpHlvLnmoYbnmoTmiafooYwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIGNvbnRleHQpIHsKICAgIC8vIOaVsOaNrgogICAgdmFyIGVkaXRGb3JtID0gcmVhY3RpdmUoewogICAgICBuYW1lOiAnJywKICAgICAgcHJpY2U6IDAsCiAgICAgIGF1dGhvcjogJycsCiAgICAgIHB1Ymxpc2hEYXRlOiAwLAogICAgICBjbGFzc2lmeTogJycKICAgIH0pOyAvLyDlhbPpl63lvLnnqpfvvIzmm7TmlrB1cGRhdGXmiJBmYWxzZQoKICAgIHZhciBjbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICBjb250ZXh0LmVtaXQoJ3VwZGF0ZTpzaG93JywgZmFsc2UpOyAvLyDmm7TmlrDkvKDpgJLov5vmnaXnmoRzaG935oiQZmFsc2UKICAgIH07IC8vIOebkeWQrOe8lui+keWQjmJvb2vkv6Hmga/nmoTmlLnlj5jvvIxjdXJyZW5077ya5Y+Y5o2i55qE5L+h5oGvCgoKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLmJvb2s7CiAgICB9LCBmdW5jdGlvbiAoY3VycmVudCkgewogICAgICAvLyDmlbDmja7kvKDlhaVlZGl0Rm9ybQogICAgICBPYmplY3QuYXNzaWduKGVkaXRGb3JtLCBjdXJyZW50KTsgLy8g5L+u5pS55pe26Ze05q2j56GuCgogICAgICBlZGl0Rm9ybS5wdWJsaXNoRGF0ZSA9IG1vbWVudChOdW1iZXIoZWRpdEZvcm0ucHVibGlzaERhdGUpKTsKICAgIH0pOyAvLyDnvJbovpHmjInpkq7vvIzojrflj5bmlbDmja7vvIzlkIjlubblr7nosaEKCiAgICB2YXIgc3VibWl0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBib29rLnVwZGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlkOiBwcm9wcy5ib29rLl9pZCwKICAgICAgICAgICAgICAgICAgLy8gaWQKICAgICAgICAgICAgICAgICAgbmFtZTogZWRpdEZvcm0ubmFtZSwKICAgICAgICAgICAgICAgICAgcHJpY2U6IGVkaXRGb3JtLnByaWNlLAogICAgICAgICAgICAgICAgICBhdXRob3I6IGVkaXRGb3JtLmF1dGhvciwKICAgICAgICAgICAgICAgICAgcHVibGlzaERhdGU6IGVkaXRGb3JtLnB1Ymxpc2hEYXRlLnZhbHVlT2YoKSwKICAgICAgICAgICAgICAgICAgY2xhc3NpZnk6IGVkaXRGb3JtLmNsYXNzaWZ5CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIC8vIGh0dHDmiJDlip/lk43lupQKICAgICAgICAgICAgICAgIHJlc3VsdChyZXMpLnN1Y2Nlc3MoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YSwKICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IF9yZWYyLm1zZzsKICAgICAgICAgICAgICAgICAgY29udGV4dC5lbWl0KCd1cGRhdGUnLCBkYXRhKTsgLy8g5pu05paw5YiX6KGo5L+h5oGvCgogICAgICAgICAgICAgICAgICBtZXNzYWdlLnN1Y2Nlc3MobXNnKTsKICAgICAgICAgICAgICAgICAgY2xvc2UoKTsgLy8g5YWz6Zet5by55qGGCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gewogICAgICBlZGl0Rm9ybTogZWRpdEZvcm0sCiAgICAgIC8vIOe8lui+keihqOWNlQogICAgICBzdWJtaXQ6IHN1Ym1pdCwKICAgICAgLy8g57yW6L6R5oyJ6ZKuCiAgICAgIHByb3BzOiBwcm9wcywKICAgICAgLy8g55uR5ZCsYm9va+aVsOaNrueahOaUueWPmAogICAgICBjbG9zZTogY2xvc2UgLy8g5YWz6Zet5by55qGGCgogICAgfTsKICB9Cn0pOw=="},{"version":3,"sources":["C:/Users/kke222222/Desktop/projects/book-mgr/book-mgr-fe/src/views/Books/Update/index.js"],"names":["defineComponent","reactive","watch","book","message","result","clone","moment","props","show","Boolean","Object","setup","context","editForm","name","price","author","publishDate","classify","close","emit","current","assign","Number","submit","update","id","_id","valueOf","res","success","data","msg"],"mappings":";;;;AAAA,SAASA,eAAT,EAA0BC,QAA1B,EAAmCC,KAAnC,QAAgD,KAAhD,C,CAAuD;;AACvD,SAASC,IAAT,QAAqB,WAArB,C,CAAkC;;AAClC,SAASC,OAAT,QAAwB,gBAAxB,C,CAA0C;;AAC1C,SAASC,MAAT,EAAgBC,KAAhB,QAA6B,iBAA7B,C,CAAgD;;AAChD,OAAOC,MAAP,MAAmB,QAAnB,C,CAA6B;;AAE7B,eAAeP,eAAe,CAAC;AAE3B;AACAQ,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAEC,OADH;AACY;AACfP,IAAAA,IAAI,EAAEQ,MAFH,CAEY;;AAFZ,GAHoB;AAQ3B;AACDC,EAAAA,KAT4B,iBAStBJ,KATsB,EAShBK,OATgB,EASP;AAEjB;AACA,QAAMC,QAAQ,GAAGb,QAAQ,CAAC;AACzBc,MAAAA,IAAI,EAAE,EADmB;AAEzBC,MAAAA,KAAK,EAAE,CAFkB;AAGzBC,MAAAA,MAAM,EAAE,EAHiB;AAIzBC,MAAAA,WAAW,EAAE,CAJY;AAKzBC,MAAAA,QAAQ,EAAE;AALe,KAAD,CAAzB,CAHiB,CAWhB;;AACA,QAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChBP,MAAAA,OAAO,CAACQ,IAAR,CAAa,aAAb,EAA4B,KAA5B,EADgB,CACoB;AACvC,KAFD,CAZgB,CAgBhB;;;AACAnB,IAAAA,KAAK,CAAC;AAAA,aAAMM,KAAK,CAACL,IAAZ;AAAA,KAAD,EAAmB,UAACmB,OAAD,EAAa;AACjC;AACAX,MAAAA,MAAM,CAACY,MAAP,CAAcT,QAAd,EAAwBQ,OAAxB,EAFiC,CAGjC;;AACAR,MAAAA,QAAQ,CAACI,WAAT,GAAuBX,MAAM,CAACiB,MAAM,CAACV,QAAQ,CAACI,WAAV,CAAP,CAA7B;AACH,KALI,CAAL,CAjBgB,CAwBhB;;AACA,QAAMO,MAAM;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEOtB,IAAI,CAACuB,MAAL,CAAY;AAC1BC,kBAAAA,EAAE,EAAEnB,KAAK,CAACL,IAAN,CAAWyB,GADW;AACP;AACnBb,kBAAAA,IAAI,EAAED,QAAQ,CAACC,IAFW;AAG1BC,kBAAAA,KAAK,EAAEF,QAAQ,CAACE,KAHU;AAI1BC,kBAAAA,MAAM,EAAEH,QAAQ,CAACG,MAJS;AAK1BC,kBAAAA,WAAW,EAAEJ,QAAQ,CAACI,WAAT,CAAqBW,OAArB,EALa;AAM1BV,kBAAAA,QAAQ,EAAEL,QAAQ,CAACK;AANO,iBAAZ,CAFP;;AAAA;AAELW,gBAAAA,GAFK;AAYV;AACDzB,gBAAAA,MAAM,CAACyB,GAAD,CAAN,CACKC,OADL,CACa,iBAAmB;AAAA,sBAAhBC,IAAgB,SAAhBA,IAAgB;AAAA,sBAAVC,GAAU,SAAVA,GAAU;AACxBpB,kBAAAA,OAAO,CAACQ,IAAR,CAAa,QAAb,EAAuBW,IAAvB,EADwB,CACM;;AAC9B5B,kBAAAA,OAAO,CAAC2B,OAAR,CAAgBE,GAAhB;AACAb,kBAAAA,KAAK,GAHmB,CAGf;AACZ,iBALL;;AAbW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAANK,MAAM;AAAA;AAAA;AAAA,OAAZ;;AAqBA,WAAO;AACHX,MAAAA,QAAQ,EAARA,QADG;AACO;AACVW,MAAAA,MAAM,EAANA,MAFG;AAEK;AACRjB,MAAAA,KAAK,EAALA,KAHG;AAGI;AACPY,MAAAA,KAAK,EAALA,KAJG,CAII;;AAJJ,KAAP;AAMJ;AA7D2B,CAAD,CAA9B","sourcesContent":["import { defineComponent, reactive,watch } from 'vue'; // reactive响应式的数字集合\r\nimport { book } from '@/service'; // 获取add请求数据\r\nimport { message } from 'ant-design-vue'; // 提示\r\nimport { result,clone } from '@/helpers/utils'; // result 判断响应内容成功或者失败；clone 复制\r\nimport moment from 'moment'; // 处理合并对象，时间\r\n\r\nexport default defineComponent({\r\n\r\n    // 允许外面传递进来的参数，弹窗开关\r\n    props: {\r\n        show: Boolean, // add弹框\r\n        book: Object,  // 书既数据\r\n    },\r\n\r\n    // 编辑弹框的执行\r\n   setup(props,context) {\r\n\r\n       // 数据\r\n       const editForm = reactive({\r\n        name: '',\r\n        price: 0,\r\n        author: '',\r\n        publishDate: 0,\r\n        classify: '',\r\n       });\r\n\r\n        // 关闭弹窗，更新update成false\r\n        const close = () => {\r\n            context.emit('update:show', false); // 更新传递进来的show成false\r\n        };\r\n\r\n        // 监听编辑后book信息的改变，current：变换的信息\r\n        watch(() => props.book, (current) => {\r\n            // 数据传入editForm\r\n            Object.assign(editForm, current);\r\n            // 修改时间正确\r\n            editForm.publishDate = moment(Number(editForm.publishDate));\r\n        });\r\n\r\n        // 编辑按钮，获取数据，合并对象\r\n        const submit = async () => {\r\n            // http修改书籍\r\n            const res = await book.update({\r\n                id: props.book._id,// id\r\n                name: editForm.name,\r\n                price: editForm.price,\r\n                author: editForm.author,\r\n                publishDate: editForm.publishDate.valueOf(),\r\n                classify: editForm.classify,\r\n               \r\n            });\r\n\r\n             // http成功响应\r\n            result(res)\r\n                .success(({ data, msg }) => {\r\n                    context.emit('update', data); // 更新列表信息\r\n                    message.success(msg);\r\n                    close(); // 关闭弹框\r\n                });\r\n        };\r\n\r\n        return {\r\n            editForm, // 编辑表单\r\n            submit, // 编辑按钮\r\n            props, // 监听book数据的改变\r\n            close, // 关闭弹框\r\n        };\r\n   },\r\n});"]}]}