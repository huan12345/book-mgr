{"remainingRequest":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\BookDetail\\index.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\BookDetail\\index.js","mtime":1637984133029},{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2trZTIyMjIyMi9EZXNrdG9wL3Byb2plY3RzL2Jvb2stbWdyL2Jvb2stbWdyLWZlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBvbk1vdW50ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlLCB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsgLy8gdXNlUm91dGU66I635Y+W5Lmm57GN55qE5L+h5oGv77ybdXNlUm91dGVy77ya5pON5L2c6Lev55Sx55qE5pa55rOVCgppbXBvcnQgeyByZXN1bHQsIGZvcm1hdFRpbWVzdGFtcCB9IGZyb20gJ0AvaGVscGVycy91dGlscyc7IC8vIGh0dHDov5Tlm57vvJsg5pe26Ze06KGl5YWoCgppbXBvcnQgeyBib29rLCBpbnZlbnRvcnlMb2cgfSBmcm9tICdAL3NlcnZpY2UnOyAvLyBodHRw77yaIOS5puexjeWIl+ihqOOAgeWHuuWFpeW6k+aXpeW/l+WIl+ihqAoKaW1wb3J0IHsgQ2hlY2tPdXRsaW5lZCB9IGZyb20gJ0BhbnQtZGVzaWduL2ljb25zLXZ1ZSc7IC8vIOWHuuWFpeW6k2ljb24KCmltcG9ydCB7IG1lc3NhZ2UgfSBmcm9tICdhbnQtZGVzaWduLXZ1ZSc7CmltcG9ydCBVcGRhdGUgZnJvbSAnQC92aWV3cy9Cb29rcy9VcGRhdGUvaW5kZXgudnVlJzsgLy8g57yW6L6RCi8vIOWHuuWFpeW6k+WIl+ihqOihqOagvOWIl+mhueaVsOaNrgoKdmFyIGNvbHVtbnMgPSBbewogIHRpdGxlOiAn5pWw6YePJywKICBkYXRhSW5kZXg6ICdudW0nCn0sIHsKICB0aXRsZTogJ+aTjeS9nOaXtumXtCcsCiAgc2xvdHM6IHsKICAgIGN1c3RvbVJlbmRlcjogJ2NyZWF0ZWRBdCcKICB9Cn1dOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIFVwZGF0ZTogVXBkYXRlLAogICAgLy8g57yW6L6RCiAgICBDaGVja091dGxpbmVkOiBDaGVja091dGxpbmVkIC8vIOWHuuWFpeW6k2ljb24KCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOyAvLyDojrflj5bkuabnsY3kv6Hmga8KCiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7IC8vIOWunueOsOi3r+eUseaTjeS9nAogICAgLy8g6I635Y+WaWTmlbDmja4KCiAgICB2YXIgaWQgPSByb3V0ZS5wYXJhbXMuaWQ7IC8vIOiOt+WPluS5puexjeeahGlkCgogICAgdmFyIGRldGFpbEluZm8gPSByZWYoe30pOyAvLyDlk43lupTlvI/or6bnu4bkv6Hmga8KCiAgICB2YXIgbG9nID0gcmVmKFtdKTsgLy8g5Ye65YWl5bqT5bqT5pel5b+X5YiX6KGoCgogICAgdmFyIHNob3dVcGRhdGVNb2RhbCA9IHJlZihmYWxzZSk7IC8vIOe8lui+keW8ueahhum7mOiupOS4jeaYvuekugoKICAgIHZhciBsb2dUb3RhbCA9IHJlZigwKTsgLy8g5pel5b+X6K6w5b2V5oC75pWwCgogICAgdmFyIGxvZ0N1clBhZ2UgPSByZWYoMSk7IC8vIOaXpeW/l+W9k+WJjemhtSAKCiAgICB2YXIgY3VyTG9nVHlwZSA9IHJlZignSU5fQ09VTlQnKTsgLy8g5b2T5YmN6buY6K6k5YWl5bqTCiAgICAvLyDojrflj5bkuabnsY3or6bnu4bkv6Hmga8KCiAgICB2YXIgZ2V0RGV0YWlsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBib29rLmRldGFpbChpZCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAvLyBodHRw5ZCO56uv6I635Y+W6K+m57uG5L+h5oGvCiAgICAgICAgICAgICAgICAvLyDlr7nkv6Hmga/ov5vooYzlpITnkIYKICAgICAgICAgICAgICAgIHJlc3VsdChyZXMpLnN1Y2Nlc3MoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTsKICAgICAgICAgICAgICAgICAgLy8g5Lmm57GN6K+m57uG5L+h5oGvCiAgICAgICAgICAgICAgICAgIGRldGFpbEluZm8udmFsdWUgPSBkYXRhOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gZ2V0RGV0YWlsKCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7IC8vIOiOt+WPluWHuuWFpeW6k+aXpeW/lwoKCiAgICB2YXIgZ2V0SW52ZW50b3J5TG9nID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gaW52ZW50b3J5TG9nLmxpc3QoaWQsIC8vIOS5puexjWlkCiAgICAgICAgICAgICAgICBjdXJMb2dUeXBlLnZhbHVlLCAvLyDlh7rmiJblhaUKICAgICAgICAgICAgICAgIGxvZ0N1clBhZ2UudmFsdWUsIC8vIOW9k+WJjemhtQogICAgICAgICAgICAgICAgMTAgLy8gMTDmnaEKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgLy8gbGlzdCDlh7rlhaXlupPliJfooagsIHRvdGFsIOaXpeW/l+iusOW9leadoeaVsAogICAgICAgICAgICAgICAgcmVzdWx0KHJlcykuc3VjY2VzcyhmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWY0JGRhdGEgPSBfcmVmNC5kYXRhLAogICAgICAgICAgICAgICAgICAgICAgbGlzdCA9IF9yZWY0JGRhdGEubGlzdCwKICAgICAgICAgICAgICAgICAgICAgIHRvdGFsID0gX3JlZjQkZGF0YS50b3RhbDsKICAgICAgICAgICAgICAgICAgbG9nLnZhbHVlID0gbGlzdDsgLy8g5YiX6KGoCgogICAgICAgICAgICAgICAgICBsb2dUb3RhbC52YWx1ZSA9IHRvdGFsOyAvLyDmnaHmlbAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gZ2V0SW52ZW50b3J5TG9nKCkgewogICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOyAvLyDmjILovb3lm57osIMKCgogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgZ2V0RGV0YWlsKCk7IC8vIOiOt+WPluS5puexjeivpuaDhQoKICAgICAgZ2V0SW52ZW50b3J5TG9nKCk7IC8vIOiOt+WPluWHuuWFpeW6k+aXpeW/l+WIl+ihqAogICAgfSk7IC8vIOWIoOmZpAoKICAgIHZhciByZW1vdmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBib29rLnJlbW92ZShpZCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgcmVzdWx0KHJlcykuc3VjY2VzcyhmdW5jdGlvbiAoX3JlZjYpIHsKICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9IF9yZWY2Lm1zZzsKICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdWNjZXNzKG1zZyk7IC8vIOWIoOmZpOaIkOWKnwoKICAgICAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoJy9ib29rcycpOyAvLyByb3V0ZXLot6/nlLHmk43kvZzvvJrot7PovazliLDpobXooajvvJtyZXBsYWNl77ya5LiN6IO95Zue5Yiw6KKr5Yig6Zmk5Lmm57GN55qE6aG16Z2iCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgICByZXR1cm4gX3JlZjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsgLy8g57yW6L6RCgoKICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoYm9vaykgewogICAgICAvLyDlkIjlubbmlbDmja4KICAgICAgT2JqZWN0LmFzc2lnbihkZXRhaWxJbmZvLnZhbHVlLCBib29rKTsKICAgIH07IC8vIOWIhumhteWIh+aNoueahOaXtuWAmQoKCiAgICB2YXIgc2V0TG9nUGFnZSA9IGZ1bmN0aW9uIHNldExvZ1BhZ2UocGFnZSkgewogICAgICBsb2dDdXJQYWdlLnZhbHVlID0gcGFnZTsgLy8g6aG156CBCgogICAgICBnZXRJbnZlbnRvcnlMb2coKTsgLy8g5pel5b+X5YiX6KGoCiAgICB9OyAvLyDnrZvpgInml6Xlv5cKCgogICAgdmFyIGxvZ0ZpbHRlciA9IGZ1bmN0aW9uIGxvZ0ZpbHRlcih0eXBlKSB7CiAgICAgIGN1ckxvZ1R5cGUudmFsdWUgPSB0eXBlOwogICAgICBnZXRJbnZlbnRvcnlMb2coKTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgZDogZGV0YWlsSW5mbywKICAgICAgLy8g5Lmm57GN6K+m57uG5L+h5oGvCiAgICAgIGZvcm1hdFRpbWVzdGFtcDogZm9ybWF0VGltZXN0YW1wLAogICAgICAvLyDmoLzlvI/ljJbml7bpl7QKICAgICAgcmVtb3ZlOiByZW1vdmUsCiAgICAgIC8vIOWIoOmZpAogICAgICBzaG93VXBkYXRlTW9kYWw6IHNob3dVcGRhdGVNb2RhbCwKICAgICAgLy8g57yW6L6R5by55qGGCiAgICAgIHVwZGF0ZTogdXBkYXRlLAogICAgICAvLyDnvJbovpEKICAgICAgbG9nOiBsb2csCiAgICAgIC8vIOWHuuWFpeW6k+W6k+aXpeW/l+WIl+ihqAogICAgICBsb2dUb3RhbDogbG9nVG90YWwsCiAgICAgIC8vIOaXpeW/l+iusOW9leaAu+aVsAogICAgICBzZXRMb2dQYWdlOiBzZXRMb2dQYWdlLAogICAgICAvLyDml6Xlv5fliIbpobUKICAgICAgY29sdW1uczogY29sdW1ucywKICAgICAgLy8g5Ye65YWl5bqT5YiX6KGo6aG5CiAgICAgIGxvZ0ZpbHRlcjogbG9nRmlsdGVyLAogICAgICAvLyDnrZvpgInml6Xlv5fvvIjljLrliIblh7rlhaXlupPvvIkKICAgICAgY3VyTG9nVHlwZTogY3VyTG9nVHlwZSwKICAgICAgLy8g5Ye65YWl5bqTaWNvbgogICAgICBsb2dDdXJQYWdlOiBsb2dDdXJQYWdlIC8vIOaXpeW/l+W9k+WJjemhtSAKCiAgICB9OwogIH0KfSk7"},{"version":3,"sources":["C:/Users/kke222222/Desktop/projects/book-mgr/book-mgr-fe/src/views/BookDetail/index.js"],"names":["defineComponent","onMounted","ref","useRoute","useRouter","result","formatTimestamp","book","inventoryLog","CheckOutlined","message","Update","columns","title","dataIndex","slots","customRender","components","setup","route","router","id","params","detailInfo","log","showUpdateModal","logTotal","logCurPage","curLogType","getDetail","detail","res","success","data","value","getInventoryLog","list","total","remove","msg","replace","update","Object","assign","setLogPage","page","logFilter","type","d"],"mappings":"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","sourcesContent":["import { defineComponent, onMounted, ref } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router'; // useRoute:获取书籍的信息；useRouter：操作路由的方法\r\nimport { result, formatTimestamp } from '@/helpers/utils'; // http返回； 时间补全\r\nimport { book, inventoryLog } from '@/service'; // http： 书籍列表、出入库日志列表\r\nimport { CheckOutlined } from '@ant-design/icons-vue'; // 出入库icon\r\nimport { message } from 'ant-design-vue';\r\nimport Update from '@/views/Books/Update/index.vue'; // 编辑\r\n\r\n// 出入库列表表格列项数据\r\nconst columns = [\r\n    {\r\n        title: '数量',\r\n        dataIndex: 'num',\r\n    },\r\n    {\r\n        title: '操作时间',\r\n        slots: {\r\n            customRender: 'createdAt',\r\n        },\r\n    },\r\n];\r\n\r\nexport default defineComponent({\r\n    components: {\r\n        Update, // 编辑\r\n        CheckOutlined, // 出入库icon\r\n    },\r\n    setup() {\r\n        const route = useRoute(); // 获取书籍信息\r\n        const router = useRouter(); // 实现路由操作\r\n\r\n        // 获取id数据\r\n        const { id } = route.params; // 获取书籍的id\r\n        const detailInfo = ref({}); // 响应式详细信息\r\n        const log = ref([]); // 出入库库日志列表\r\n        const showUpdateModal = ref(false); // 编辑弹框默认不显示\r\n        const logTotal = ref(0); // 日志记录总数\r\n        const logCurPage = ref(1); // 日志当前页 \r\n        const curLogType = ref('IN_COUNT'); // 当前默认入库\r\n\r\n        // 获取书籍详细信息\r\n        const getDetail = async () => {\r\n            const res = await book.detail(id); // http后端获取详细信息\r\n\r\n            // 对信息进行处理\r\n            result(res)\r\n                .success(({ data }) => {\r\n                    // 书籍详细信息\r\n                    detailInfo.value = data; \r\n                });\r\n        };\r\n\r\n        // 获取出入库日志\r\n        const getInventoryLog = async () => {\r\n            // http\r\n            const res = await inventoryLog.list(\r\n                id, // 书籍id\r\n                curLogType.value, // 出或入\r\n                logCurPage.value,  // 当前页\r\n                10, // 10条\r\n            );\r\n\r\n            // list 出入库列表, total 日志记录条数\r\n            result(res)\r\n                .success(({ data: { list, total } }) => {\r\n                    log.value = list; // 列表\r\n                    logTotal.value = total; // 条数\r\n                });\r\n        };\r\n\r\n        // 挂载回调\r\n        onMounted(() => {\r\n            getDetail(); // 获取书籍详情\r\n            getInventoryLog(); // 获取出入库日志列表\r\n        });\r\n\r\n        // 删除\r\n        const remove = async () => {\r\n            // http后端删除book\r\n            const res = await book.remove(id);\r\n\r\n            result(res)\r\n                .success(({ msg }) => {\r\n                    message.success(msg); // 删除成功\r\n                    router.replace('/books'); // router路由操作：跳转到页表；replace：不能回到被删除书籍的页面\r\n                });\r\n        };\r\n\r\n        // 编辑\r\n        const update = (book) => {\r\n            // 合并数据\r\n            Object.assign(detailInfo.value, book);\r\n        };\r\n\r\n        // 分页切换的时候\r\n        const setLogPage = (page) => {\r\n            logCurPage.value = page; // 页码\r\n\r\n            getInventoryLog(); // 日志列表\r\n        };\r\n\r\n        // 筛选日志\r\n        const logFilter = (type) => {\r\n            curLogType.value = type;\r\n            getInventoryLog();\r\n        };\r\n\r\n        return {\r\n            d: detailInfo, // 书籍详细信息\r\n            formatTimestamp, // 格式化时间\r\n            remove, // 删除\r\n            showUpdateModal, // 编辑弹框\r\n            update, // 编辑\r\n            log, // 出入库库日志列表\r\n            logTotal, // 日志记录总数\r\n            setLogPage, // 日志分页\r\n            columns, // 出入库列表项\r\n            logFilter, // 筛选日志（区分出入库）\r\n            curLogType, // 出入库icon\r\n            logCurPage, // 日志当前页 \r\n        };\r\n    },\r\n});"]}]}