{"remainingRequest":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\Books\\Update\\index.js?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\src\\views\\Books\\Update\\index.js","mtime":1636099902903},{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\kke222222\\Desktop\\projects\\book-mgr\\book-mgr-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMva2tlMjIyMjIyL0Rlc2t0b3AvcHJvamVjdHMvYm9vay1tZ3IvYm9vay1tZ3ItZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMva2tlMjIyMjIyL0Rlc2t0b3AvcHJvamVjdHMvYm9vay1tZ3IvYm9vay1tZ3ItZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgcmVhY3RpdmUsIHdhdGNoIH0gZnJvbSAndnVlJzsgLy8gcmVhY3RpdmXlk43lupTlvI/nmoTmlbDlrZfpm4blkIgKCmltcG9ydCB7IGJvb2sgfSBmcm9tICdAL3NlcnZpY2UnOyAvLyDojrflj5ZhZGTor7fmsYLmlbDmja4KCmltcG9ydCB7IG1lc3NhZ2UgfSBmcm9tICdhbnQtZGVzaWduLXZ1ZSc7IC8vIOaPkOekugoKaW1wb3J0IHsgcmVzdWx0LCBjbG9uZSB9IGZyb20gJ0AvaGVscGVycy91dGlscyc7IC8vIHJlc3VsdCDliKTmlq3lk43lupTlhoXlrrnmiJDlip/miJbogIXlpLHotKXvvJtjbG9uZSDlpI3liLYKCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsgLy8g5re75Yqg5Lmm57GN6KGo5Y2V5YaF55qE5L+h5oGvCgp2YXIgZGVmYXVsdEZvcm1EYXRhID0gewogIG5hbWU6ICcnLAogIHByaWNlOiAwLAogIGF1dGhvcjogJycsCiAgcHVibGlzaERhdGU6IDAsCiAgY2xhc3NpZnk6ICcnLAogIGNvdW50OiAnJwp9OwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIC8vIOWFgeiuuOWklumdouS8oOmAkui/m+adpeeahOWPguaVsAogIHByb3BzOiB7CiAgICBzaG93OiBCb29sZWFuLAogICAgLy8g5by556qX5byA5YWzCiAgICBib29rOiBPYmplY3QKICB9LAogIC8vIOa3u+WKoOW8ueahhueahOaJp+ihjAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgY29udGV4dCkgewogICAgdmFyIGVkaXRGb3JtID0gcmVhY3RpdmUoewogICAgICBuYW1lOiAnJywKICAgICAgcHJpY2U6IDAsCiAgICAgIGF1dGhvcjogJycsCiAgICAgIHB1Ymxpc2hEYXRlOiAwLAogICAgICBjbGFzc2lmeTogJycKICAgIH0pOyAvLyDlhbPpl63lvLnnqpfvvIzmm7TmlrB1cGRhdGXmiJBmYWxzZQoKICAgIHZhciBjbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICBjb250ZXh0LmVtaXQoJ3VwZGF0ZTpzaG93JywgZmFsc2UpOyAvLyDmm7TmlrDkvKDpgJLov5vmnaXnmoRzaG935oiQZmFsc2UKICAgIH07CgogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcHJvcHMuYm9vazsKICAgIH0sIGZ1bmN0aW9uIChjdXJyZW50KSB7CiAgICAgIE9iamVjdC5hc3NpZ24oZWRpdEZvcm0sIGN1cnJlbnQpOwogICAgICBlZGl0Rm9ybS5wdWJsaXNoRGF0ZSA9IG1vbWVudChOdW1iZXIoZWRpdEZvcm0ucHVibGlzaERhdGUpKTsKICAgIH0pOyAvLyDnvJbovpEKCiAgICB2YXIgc3VibWl0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBib29rLnVwZGF0ZShfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgaWQ6IHByb3BzLmJvb2suX2lkCiAgICAgICAgICAgICAgICB9LCBlZGl0Rm9ybSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmVzdWx0KHJlcykuc3VjY2VzcyhmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIHsKICAgICAgZWRpdEZvcm06IGVkaXRGb3JtLAogICAgICBzdWJtaXQ6IHN1Ym1pdCwKICAgICAgcHJvcHM6IHByb3BzLAogICAgICBjbG9zZTogY2xvc2UKICAgIH07CiAgfQp9KTs="},{"version":3,"sources":["C:/Users/kke222222/Desktop/projects/book-mgr/book-mgr-fe/src/views/Books/Update/index.js"],"names":["defineComponent","reactive","watch","book","message","result","clone","moment","defaultFormData","name","price","author","publishDate","classify","count","props","show","Boolean","Object","setup","context","editForm","close","emit","current","assign","Number","submit","update","id","_id","res","success","data"],"mappings":";;;;AAAA,SAASA,eAAT,EAA0BC,QAA1B,EAAmCC,KAAnC,QAAgD,KAAhD,C,CAAsD;;AACtD,SAASC,IAAT,QAAqB,WAArB,C,CAAiC;;AACjC,SAASC,OAAT,QAAwB,gBAAxB,C,CAAyC;;AACzC,SAASC,MAAT,EAAgBC,KAAhB,QAA6B,iBAA7B,C,CAA+C;;AAC/C,OAAOC,MAAP,MAAmB,QAAnB,C,CACA;;AACA,IAAMC,eAAe,GAAG;AAChBC,EAAAA,IAAI,EAAE,EADU;AAEhBC,EAAAA,KAAK,EAAE,CAFS;AAGhBC,EAAAA,MAAM,EAAE,EAHQ;AAIhBC,EAAAA,WAAW,EAAE,CAJG;AAKhBC,EAAAA,QAAQ,EAAE,EALM;AAMhBC,EAAAA,KAAK,EAAE;AANS,CAAxB;AASA,eAAed,eAAe,CAAC;AAC3B;AACAe,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAEC,OADH;AACY;AACfd,IAAAA,IAAI,EAAEe;AAFH,GAFoB;AAO3B;AACDC,EAAAA,KAR4B,iBAQtBJ,KARsB,EAQhBK,OARgB,EAQP;AACjB,QAAMC,QAAQ,GAAGpB,QAAQ,CAAC;AACzBQ,MAAAA,IAAI,EAAE,EADmB;AAEzBC,MAAAA,KAAK,EAAE,CAFkB;AAGzBC,MAAAA,MAAM,EAAE,EAHiB;AAIzBC,MAAAA,WAAW,EAAE,CAJY;AAKzBC,MAAAA,QAAQ,EAAE;AALe,KAAD,CAAzB,CADiB,CAQhB;;AACA,QAAMS,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChBF,MAAAA,OAAO,CAACG,IAAR,CAAa,aAAb,EAA4B,KAA5B,EADgB,CACmB;AACtC,KAFD;;AAIArB,IAAAA,KAAK,CAAC;AAAA,aAAMa,KAAK,CAACZ,IAAZ;AAAA,KAAD,EAAmB,UAACqB,OAAD,EAAa;AACjCN,MAAAA,MAAM,CAACO,MAAP,CAAcJ,QAAd,EAAwBG,OAAxB;AACAH,MAAAA,QAAQ,CAACT,WAAT,GAAuBL,MAAM,CAACmB,MAAM,CAACL,QAAQ,CAACT,WAAV,CAAP,CAA7B;AACH,KAHI,CAAL,CAbgB,CAiBhB;;AACA,QAAMe,MAAM;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACOxB,IAAI,CAACyB,MAAL;AACdC,kBAAAA,EAAE,EAAEd,KAAK,CAACZ,IAAN,CAAW2B;AADD,mBAEXT,QAFW,EADP;;AAAA;AACLU,gBAAAA,GADK;AAMX1B,gBAAAA,MAAM,CAAC0B,GAAD,CAAN,CACKC,OADL,CACa,iBAAc;AAAA,sBAAXC,IAAW,SAAXA,IAAW;AAEtB,iBAHL;;AANW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAANN,MAAM;AAAA;AAAA;AAAA,OAAZ;;AAYA,WAAO;AACHN,MAAAA,QAAQ,EAARA,QADG;AAEHM,MAAAA,MAAM,EAANA,MAFG;AAGHZ,MAAAA,KAAK,EAALA,KAHG;AAIHO,MAAAA,KAAK,EAALA;AAJG,KAAP;AAMJ;AA5C2B,CAAD,CAA9B","sourcesContent":["import { defineComponent, reactive,watch } from 'vue';// reactive响应式的数字集合\r\nimport { book } from '@/service';// 获取add请求数据\r\nimport { message } from 'ant-design-vue';// 提示\r\nimport { result,clone } from '@/helpers/utils';// result 判断响应内容成功或者失败；clone 复制\r\nimport moment from 'moment';\r\n// 添加书籍表单内的信息\r\nconst defaultFormData = {\r\n        name: '',\r\n        price: 0,\r\n        author: '',\r\n        publishDate: 0,\r\n        classify: '',\r\n        count: '',\r\n}\r\n\r\nexport default defineComponent({\r\n    // 允许外面传递进来的参数\r\n    props: {\r\n        show: Boolean, // 弹窗开关\r\n        book: Object,\r\n\r\n    },\r\n    // 添加弹框的执行\r\n   setup(props,context) {\r\n       const editForm = reactive({\r\n        name: '',\r\n        price: 0,\r\n        author: '',\r\n        publishDate: 0,\r\n        classify: '',\r\n       });\r\n        // 关闭弹窗，更新update成false\r\n        const close = () => {\r\n            context.emit('update:show', false);// 更新传递进来的show成false\r\n        };\r\n\r\n        watch(() => props.book, (current) => {\r\n            Object.assign(editForm, current);\r\n            editForm.publishDate = moment(Number(editForm.publishDate));\r\n        })\r\n        // 编辑\r\n        const submit = async () => {\r\n            const res = await book.update({\r\n                id: props.book._id,\r\n                ...editForm,\r\n            });\r\n        \r\n            result(res)\r\n                .success(({ data }) => {\r\n\r\n                });\r\n        };\r\n\r\n        return {\r\n            editForm,\r\n            submit,\r\n            props,\r\n            close,\r\n        };\r\n   },\r\n});"]}]}